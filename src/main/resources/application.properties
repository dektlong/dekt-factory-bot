spring.application.name=goose-agent-chat

# Goose Configuration
goose.enabled=true

# Async configuration for SSE streaming
spring.mvc.async.request-timeout=600000

# Disable response buffering for streaming
server.tomcat.max-swallow-size=-1

# Access code for basic authentication
app.auth.secret=${APP_AUTH_SECRET:changeme}

# --- PostgreSQL (Cloud Foundry binding) ---
# Bind a Postgres service in manifest (e.g. dekt-factory-data or a postgres marketplace service).
# java-cfenv-boot creates the DataSource from VCAP_SERVICES when a JDBC/Postgres service is bound.
# When no Postgres is bound, DataSource/JPA autoconfig is excluded so the app still starts.
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
  org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration

# --- Embedding model (GenAI / Cloud Foundry) ---
# RAG is enabled by default. The app will activate embedding + vector search
# when a GenAI embedding service and Postgres are bound; otherwise it degrades gracefully.
app.embedding.enabled=${APP_EMBEDDING_ENABLED:true}
app.embedding.model=${EMBEDDING_MODEL:text-embedding-3-small}
